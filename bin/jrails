#!/usr/bin/env ruby

require 'rubygems'
require 'rake'

RAILS_ROOT = Dir.pwd
rakeapp = Rake.application
fname =File.join(File.dirname(__FILE__), '..', 'tasks', 'jrails.rake')
load fname

task :help do
  puts "jrails [command]\n\n"
  rakeapp.options.show_task_pattern = Regexp.new('^[hius]')
  rakeapp.display_tasks_and_comments
end

desc "Copies the jQuery and jRails javascripts to public/javascripts"
task :update do 
  Rake::Task['jrails:update:javascripts'].invoke
end

desc 'Installs the jQuery and jRails javascripts to public/javascripts'
task :install do
  Rake::Task['jrails:update:javascripts'].invoke
end

desc 'Remove the prototype / script.aculo.us javascript files'
task :scrub do
  files = %W[controls.js dragdrop.js effects.js prototype.js]
	project_dir = File.join(RAILS_ROOT, 'public', 'javascripts')
  files.each do |fname|
    FileUtils.rm File.join(project_dir, fname)
  end
end


rakeapp.init("jrails")
task :default => [:help]

rakeapp.top_level
